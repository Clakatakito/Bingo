LDAP ACCOUNT MANAGER

El servicio LDAP, nos facilita el control de acceso entre usuarios a la red, para poder utilizar a los usuarios en diferentes máquinas conectados a la red guardando los datos de cada uno y facilita la gestión de permisos de los alumnos, profesores y trabajadores del instituto , lo hemos implementado de la siguiente manera:

Configuración hecha en el servidor

Empezamos utilizando el siguiente pedido, para asegurarnos de que todo esté bien actualizado y no dé problemas:
    -sudo apt update + upgrade

Instalamos los paquetes necesarios
    -sudo apt install apache2 php php-cgi libapache2-mod-php php-mbstring php-common php-pear ldap-utils

Para saber qué versión de apache2 tienes
    -sudo php -v

Activamos la configuración php
    -sudo a2enconf php8.(la version de php que tengas)-cgi

Cargamos el servicio apache2 para recoger las configuraciones
    -sudo systemctl reload apache2

Instalamos ldap y la GUI de ldap cuando nos pida la contraseña pondremos la deseada para entrar en el ldap
    -sudo apt install slapd ldap-accountmanager

    -sudo nano /etc/apache2/conf-enabled/ldap-account-manager.conf
En la parte de Requere ip ponemos la ip de 
localhost y la ip desde la maquina que queremos entrar a LDAP

    -Require ip 127.0.0.1 (direccion_ip_desde_la_que_quiere_entrar(192.168.XXX.XXX/XX))



Configuración hecha al cliente

Empezamos utilizando el siguiente pedido, para asegurarnos de que todo esté bien actualizado y no dé problemas:
    -sudo apt update + upgrade

Instalamos los paquetes necesarios para que los clientes se comuniquen con el servicio ldap
    -sudo apt install libnss-ldap libpam-ldap ldap-utils

Accederemos a este archivo de configuración y le diremos que coja las contraseñas y grupos
    -sudo nano /etc/nsswitch.conf

    -passwd:        files ldap
    -group:         files ldap



    -sudo nano /etc/pam.d/common-session

Al final del archivo ponemos:

    -session optional pam_mkhomedir.so skel=/etc/skel umask=077

    -sudo apt install nslcd:

Rellenamos las credenciales y hacemos reboot

Así tendremos funcionando el servicio LDAP